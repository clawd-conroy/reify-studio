#!/bin/bash
# Fresh rebuild of devcontainer
set -e

cd "$(dirname "$0")"

echo "==> Stopping containers and removing volumes..."
docker compose -f .devcontainer/docker-compose.yml down -v

echo "==> Rebuilding image (no cache)..."
docker compose -f .devcontainer/docker-compose.yml build --no-cache

echo "==> Starting containers..."
docker compose -f .devcontainer/docker-compose.yml up -d

echo "==> Done! Attach with:"
echo "    ./docker-shell"
